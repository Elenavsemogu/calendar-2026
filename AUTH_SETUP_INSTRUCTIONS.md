# üîê –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

### 1.1 –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–ª–∏)
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Secret Room Calendar")
4. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ username (–Ω–∞–ø—Ä–∏–º–µ—Ä: `secretroomcalendar_bot`)
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Bot Token** (—É–∂–µ –µ—Å—Ç—å: `8191206268:AAEYjnXVO9q7kBGBzvir5ntXPedoMQO7IrM`)

### 1.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –¥–ª—è Telegram Login
1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/setdomain`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –£–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `secretroom.com` –∏–ª–∏ `localhost` –¥–ª—è —Ç–µ—Å—Ç–∞)

### 1.3 –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@secreetroommedia](https://t.me/secreetroommedia)
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ ‚Üí Administrators ‚Üí Add Admin
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ
4. ‚úÖ –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞: **View messages** (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–µ –Ω—É–∂–Ω–æ)

---

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Apps Script

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
1. –û—Ç–∫—Ä–æ–π—Ç–µ [script.google.com](https://script.google.com/)
2. –ù–∞–∂–º–∏—Ç–µ **New project**
3. –ù–∞–∑–æ–≤–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: "SecretRoom Auth Backend"

### 2.2 –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `google-apps-script-auth.js`
2. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Google Apps Script
3. **–ó–∞–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**

```javascript
const CONFIG = {
  BOT_TOKEN: '8191206268:AAEYjnXVO9q7kBGBzvir5ntXPedoMQO7IrM',
  CHANNEL_ID: '@secreetroommedia',
  SPREADSHEET_ID: '–í–ê–®_ID_–¢–ê–ë–õ–ò–¶–´', // ‚¨ÖÔ∏è –ó–ê–ú–ï–ù–ò–¢–¨!
  SHEET_NAME: 'Auth Users'
};
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å SPREADSHEET_ID:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google –¢–∞–±–ª–∏—Ü—É
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∏–∑ URL: `https://docs.google.com/spreadsheets/d/[–≠–¢–û_ID]/edit`

### 2.3 Deploy –∫–∞–∫ Web App
1. –ù–∞–∂–º–∏—Ç–µ **Deploy** ‚Üí **New deployment**
2. –¢–∏–ø: **Web app**
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Execute as:** Me
   - **Who has access:** Anyone
4. –ù–∞–∂–º–∏—Ç–µ **Deploy**
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Web App URL** (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `https://script.google.com/macros/s/.../exec`)

### 2.4 –í—Å—Ç–∞–≤—å—Ç–µ URL –≤ –∫–æ–¥ —Å–∞–π—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ `app.js`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
   ```javascript
   scriptUrl: 'YOUR_GOOGLE_APPS_SCRIPT_URL'
   ```
3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL:
   ```javascript
   scriptUrl: 'https://script.google.com/macros/s/–í–êSH_ID/exec'
   ```

### 2.5 –û–±–Ω–æ–≤–∏—Ç–µ –∏–º—è –±–æ—Ç–∞
–í `app.js` –Ω–∞–π–¥–∏—Ç–µ:
```javascript
botUsername: 'secretroomcalendar_bot'
```
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–±–µ–∑ @).

---

## –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3.1 –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è overlay —Å blur
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª" ‚Üí –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å
4. –ù–∞–∂–º–∏—Ç–µ "Log in with Telegram"
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é
6. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø"

### 3.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Google Sheets
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É
- –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–π –ª–∏—Å—Ç "Auth Users"
- –í –Ω—ë–º –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –®–∞–≥ 4: –ü—É–±–ª–∏–∫–∞—Ü–∏—è

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∞–π—Ç –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ (Netlify, Vercel, GitHub Pages)
2. –í @BotFather –æ–±–Ω–æ–≤–∏—Ç–µ –¥–æ–º–µ–Ω (`/setdomain`)
3. –ì–æ—Ç–æ–≤–æ! üéâ

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Telegram widget –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ @BotFather —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω (`/setdomain`)

### "Not subscribed" –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏
‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–æ–º –≤ –∫–∞–Ω–∞–ª
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ CHANNEL_ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `@secreetroommedia`

### "CORS error" –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Apps Script
‚úÖ –í Apps Script –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø "Anyone"
‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ app.js

### –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–∞?
–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ app.js —Å—Ç—Ä–æ–∫—É:
```javascript
// checkAuth(); 
```

---

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets

–¢–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- **Timestamp** ‚Äî –¥–∞—Ç–∞/–≤—Ä–µ–º—è –≤—Ö–æ–¥–∞
- **Telegram ID** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **First Name** ‚Äî –∏–º—è
- **Last Name** ‚Äî —Ñ–∞–º–∏–ª–∏—è
- **Username** ‚Äî @username (–µ—Å–ª–∏ –µ—Å—Ç—å)
- **Profession** ‚Äî –≤—ã–±—Ä–∞–Ω–Ω–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è
- **Photo URL** ‚Äî –∞–≤–∞—Ç–∞—Ä–∫–∞
- **Auth Date** ‚Äî –¥–∞—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Telegram

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **Bot Token —Ö—Ä–∞–Ω–∏—Ç—Å—è –¢–û–õ–¨–ö–û –≤ Google Apps Script** (–Ω–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ)
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ Telegram Bot API
‚úÖ Access token —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ –î–∞–Ω–Ω—ã–µ –≤ localStorage (–º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å —á–µ—Ä–µ–∑ DevTools)

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:
1. –í–∏–¥–µ—Ç—å —Ä–∞–∑–º—ã—Ç—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
2. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª
4. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é
5. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —à–∞–≥–∏ –≤—ã—à–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ! üíô
